<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Estacionamentos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    label {
      font-weight: bold;
    }

    select {
      width: 300px;
      padding: 8px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <label for="estacionamentos">Selecione um estacionamento:</label><br>

  <select id="estacionamentos">
    <option value="">Carregando...</option>
  </select>

  <script>
    async function carregarEstacionamentos() {
      try {
        const response = await fetch('http://192.168.0.10:8080/api/v1/estacionamentos');

        if (!response.ok) {
          throw new Error('Erro ao buscar dados');
        }

        const result = await response.json();

        const select = document.getElementById('estacionamentos');
        select.innerHTML = '<option value="">Selecione...</option>';

        result.data.forEach(est => {
          const option = document.createElement('option');
          option.value = est.id;
          option.textContent = est.nome;
          select.appendChild(option);
        });

      } catch (error) {
        console.error(error);
        const select = document.getElementById('estacionamentos');
        select.innerHTML = '<option value="">Erro ao carregar</option>';
      }
    }

    carregarEstacionamentos();
  </script>

</body>
</html>
